@use '../../../../node_modules/@inc2734/unitone-css/src/layout-primitives/text/text';

:where(
	.is-layout-constrained,
	.is-root-container
) {
	@include text.abstract-text();

  @for $i from -2 through 7 {
    &[data-unitone-layout~="-gap\:#{ $i }"] > * {
      --unitone--text-gap: var(--unitone--s#{ $i }) !important;
    }
  }

	> * {
		--unitone--text-gap-scale: 1;
		--unitone--text-gap: var(--unitone--global--text-gap);
		--unitone--text-gap-increment: 0px;
		--unitone--margin-block: calc(var(--unitone--text-gap-scale) * var(--unitone--text-gap) + var(--unitone--text-gap-increment));
	}

	> :where(h2, h3, h4, h5, h6) {
		--unitone--text-gap-scale: 2;

		& + :where(h2, h3, h4, h5, h6) {
			--unitone--text-gap-scale: 1;
		}
	}

	> h5 + * {
		--unitone--text-gap-scale: .5;
	}

	> h6 + * {
		--unitone--text-gap-scale: .5;
	}

	> .wp-block-audio,
	> .wp-block-embed,
	> .wp-block-image,
	> .wp-block-table,
	> .wp-block-video,
	> .wp-block-code {
		--unitone--text-gap-increment: calc(1em * var(--unitone--half-leading));

		&:first-child:first-child {
			margin-block-start: calc(1em * var(--unitone--half-leading));
		}

		&:not(.alignleft):not(.alignright) + * {
			--unitone--text-gap-increment: calc(1em * var(--unitone--half-leading));
		}
	}
}

.entry-content.wp-block-post-content,
.entry-content[data-unitone-layout="text"],
:where(.is-root-container) {
	--unitone--gutters: var(--unitone--global--gutters);
}
